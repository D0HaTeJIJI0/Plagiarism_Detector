package gui;

import alg.Heskel;
import javafx.fxml.FXML;
import javafx.scene.control.MenuBar;
import javafx.scene.control.TextArea;
import lib.tokenizing.TokenTypeJava;
import lib.tokenizing.Tokenizer;

import java.util.ArrayList;

public class Controller {

    @FXML
    private TextArea textArea1;
    @FXML
    private TextArea textArea2;
    @FXML
    private TextArea resultArea;
    @FXML
    private MenuBar menuBar;
    String inputCode;
    String suspiciousCode;

    @FXML
    private void analyze(){
	
	inputCode = textArea1.getText();
        suspiciousCode = textArea2.getText();
        Tokenizer tokenizerInput = new Tokenizer(inputCode),
                    tokenizerSusp = new Tokenizer(suspiciousCode);
        ArrayList<TokenTypeJava> tokenListInput  = tokenizerInput.getTokenizedList(),
                                    tokenListSusp = tokenizerSusp.getTokenizedList();
        textArea1.setText(s.toString());
       s.delete(0, s.length());
        for (TokenTypeJava t : tokenListSusp){
            s.append(t + "\n");
        }
        textArea2.setText(s.toString());
        double resPercent = Heskel.detect(tokenListInput, tokenListSusp);
        resultArea.setText(resPercent + "% plagiarism detected.");
	 StringBuffer s = new StringBuffer();
        for (TokenTypeJava t : tokenListInput){
            s.append(t + "\n");
        }

    }

    public Controller() {

        textArea1 = new TextArea();
        textArea2 = new TextArea();
        menuBar = new MenuBar();

    }

}
